<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Techkriti - ">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Techkriti</title>

   <!-- Base Css Files -->
        <link href="assets/libs/jqueryui/ui-lightness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet" />
        <link href="assets/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
        <link href="assets/libs/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
        <link href="assets/libs/fontello/css/fontello.css" rel="stylesheet" />
        <link href="assets/libs/animate-css/animate.min.css" rel="stylesheet" />
        <link href="assets/libs/nifty-modal/css/component.css" rel="stylesheet" />
        <link href="assets/libs/magnific-popup/magnific-popup.css" rel="stylesheet" /> 
        <link href="assets/libs/ios7-switch/ios7-switch.css" rel="stylesheet" /> 
            <link href="/css/toastr.min.css" rel="stylesheet">
        <link href="assets/libs/pace/pace.css" rel="stylesheet" />
        <link href="assets/libs/sortable/sortable-theme-bootstrap.css" rel="stylesheet" />
        <link href="assets/libs/bootstrap-datepicker/css/datepicker.css" rel="stylesheet" />
        <link href="assets/libs/jquery-icheck/skins/all.css" rel="stylesheet" />
        <!-- Code Highlighter for Demo -->
        <link href="assets/libs/prettify/github.css" rel="stylesheet" />
        
                <!-- Extra CSS Libraries Start -->
                <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
                <!-- Extra CSS Libraries End -->
        <link href="assets/css/style-responsive.css" rel="stylesheet" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <link rel="shortcut icon" href="assets/img/favicon.ico">
        <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="assets/img/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="assets/img/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="assets/img/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="120x120" href="assets/img/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="assets/img/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon" sizes="152x152" href="assets/img/apple-touch-icon-152x152.png" />
</head>

<body>
    <div class="container">
    <div class="full-content-center">
      <p class="text-center"><a href="login.html#"><img src="/img/techkritifinallogo.png" alt="Logo" style="display: block;margin-left: auto;margin-right: auto;width:50%;min-width:350px;height:30%;line-height:100%;" ></a></p>
      <div class="login-wrap animated flipInX">
        <div class="login-block">
            <form class="form-signin"  name="myForm" id="registerSubmit" >
          <img src="img/default-user.png" class="img-circle not-logged-avatar">
            <div class="form-group login-input">
            <input type="text" id = "name" name="name" class="form-control" placeholder="Name" required/>
            </div>
            <div class="form-group login-input">
            <input type="email" id = "email" name="Email" class="form-control" placeholder="Email" required>
            </div>
            </div>
            <div class="form-group login-input">
            <input type="text" id = "number" name="number" class="form-control" placeholder="Phone Number" required/>
            </div>
            <div class="form-group login-input">
            <input type="password" id = "password" name="password" class="form-control" placeholder="password" required/>
            </div>
            <div class="form-group login-input">
            <input type="password" id = "password2" name="password2" class="form-control" placeholder="Repeat Password" required/>
            </div>
            <div class="row">
              <div class="col-sm-6">
              <button  type="button" id="registerbutton" class="btn btn-success btn-block" id= "loginbutton" >Register</button>
              </div>
              <div class="col-sm-6">
              <a href="/Login" class="btn btn-default btn-block">Or Login Here</a>
              </div>
            </div><br>            
            <div class="row">
             <div class="col-sm-12">
              <div class="fb-login-button" data-max-rows="1" data-size="xlarge" data-show-faces="false" data-auto-logout-link="false"></div>
              </div>
            </div>
            </form>
        </div>
      </div>
      
    </div>
  </div>
    <div id='status'></div>


    <!-- Placed at the end of the document so the pages load faster -->
     <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="assets/libs/jquery/jquery-1.11.1.min.js"></script>
  <script src="assets/libs/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/libs/jqueryui/jquery-ui-1.10.4.custom.min.js"></script>
  <script src="assets/libs/jquery-ui-touch/jquery.ui.touch-punch.min.js"></script>
  <script src="assets/libs/jquery-detectmobile/detect.js"></script>
  <script src="assets/libs/jquery-animate-numbers/jquery.animateNumbers.js"></script>
  <script src="assets/libs/ios7-switch/ios7.switch.js"></script>
  <script src="assets/libs/fastclick/fastclick.js"></script>
  <script src="assets/libs/jquery-blockui/jquery.blockUI.js"></script>
  <script src="assets/libs/bootstrap-bootbox/bootbox.min.js"></script>
  <script src="assets/libs/jquery-slimscroll/jquery.slimscroll.js"></script>
  <script src="assets/libs/jquery-sparkline/jquery-sparkline.js"></script>
  <script src="assets/libs/nifty-modal/js/classie.js"></script>
  <script src="assets/libs/nifty-modal/js/modalEffects.js"></script>
  <script src="assets/libs/sortable/sortable.min.js"></script>
  <script src="assets/libs/bootstrap-fileinput/bootstrap.file-input.js"></script>
  <script src="assets/libs/bootstrap-select/bootstrap-select.min.js"></script>
  <script src="assets/libs/bootstrap-select2/select2.min.js"></script>
  <script src="assets/libs/magnific-popup/jquery.magnific-popup.min.js"></script> 
  <script src="assets/libs/pace/pace.min.js"></script>
  <script src="assets/libs/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
  <script src="assets/libs/jquery-icheck/icheck.min.js"></script>

  <!-- Demo Specific JS Libraries -->
  <script src="assets/libs/prettify/prettify.js"></script>

  <script src="assets/js/init.js"></script>

<script src="/js/jquery.js"></script>
    <script src="/js/register.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/toastr.min.js"></script>
     <script type="text/javascript">
     localStorage.removeItem('token');
   (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
        
  window.fbAsyncInit = function() {
  FB.init({
    appId      : '664781020306171',
    cookie     : true,  // enable cookies to allow the server to access 
                        // the session
    xfbml      : true,  // parse social plugins on this page
    version    : 'v2.1' // use version 2.1
  });
    FB.getLoginStatus(function(response) {
          localStorage.setItem('token',response.authResponse.accessToken);
    statusChangeCallback(response);
  });
}

 function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      testAPI();
    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into this app.';
    } else {
      // The person is not logged into Facebook, so we're not sure if
      // they are logged into this app or not.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into Facebook.';
    }
  }
    function testAPI() {
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name, response);
      document.getElementById('status').innerHTML =
        'Thanks for logging in, ' + response.name + '!';
        var email = response.email;
        if(email.length){email = email[0]}; //In case of multiple emails being sent
                    $.ajax({
              type: "POST",
              url: "user/fb",
                contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({ name: response.name, email: response.email, id: response.id, token: localStorage.token  })
            })
              .done(function( msg ) {
                console.log(msg);
                if(msg.flashes['sucess']['type'] == 'sucess')
                document.location = "/profile";

              });
   });
  }


    </script>
</body>

</html>


